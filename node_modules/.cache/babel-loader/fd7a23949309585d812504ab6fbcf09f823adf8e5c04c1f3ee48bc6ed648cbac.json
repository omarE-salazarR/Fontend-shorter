{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";const Rdir=()=>{const{shortUrl}=useParams();const[loading,setLoading]=useState(false);const domain=`${window.location.protocol}//${window.location.host}/`;useEffect(()=>{if(shortUrl){checkShortUrl(shortUrl);}},[shortUrl]);const checkShortUrl=async shortUrl=>{setLoading(true);try{const response=await axios.post(process.env.REACT_APP_API_URL+'/api/verify',{url:domain+shortUrl},{headers:{'Authorization':`Bearer ${process.env.REACT_APP_TOKEN}`}});console.log(response.data.status);if(response.data.status=='success'){window.location.href=response.data.url;}else{window.location.href='/';}}catch(error){console.error(error);window.location.href='/';}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"Cargando...\"}):/*#__PURE__*/_jsx(\"p\",{children:\"Espere un momento, lo estamos redirigiendo ...\"})});};export default Rdir;","map":{"version":3,"names":["React","useState","useEffect","useParams","axios","jsx","_jsx","Rdir","shortUrl","loading","setLoading","domain","window","location","protocol","host","checkShortUrl","response","post","process","env","REACT_APP_API_URL","url","headers","REACT_APP_TOKEN","console","log","data","status","href","error","children"],"sources":["/var/www/html/short/front/Fontend-shorter/src/components/Rdir.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\n\nconst Rdir = () => {\n  const { shortUrl } = useParams();\n  const [loading, setLoading] = useState(false);\n  const domain = `${window.location.protocol}//${window.location.host}/`;\n  useEffect(() => {\n    if (shortUrl) {\n      checkShortUrl(shortUrl);\n    }\n  }, [shortUrl]);\n\n  const checkShortUrl = async (shortUrl) => {\n    setLoading(true);\n    try {\n      const response = await axios.post(process.env.REACT_APP_API_URL+'/api/verify', { \n        url: domain+shortUrl \n      },\n      {\n        headers: {\n        'Authorization': `Bearer ${process.env.REACT_APP_TOKEN}`\n      }\n      });\n      console.log(response.data.status);\n      if(response.data.status== 'success'){\n        window.location.href = response.data.url;\n      }else{\n        window.location.href = '/';\n      }\n    } catch (error) {\n      console.error(error);\n      window.location.href = '/';\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div>\n      {loading ? (\n        <p>Cargando...</p>\n      ) : (\n        <p>Espere un momento, lo estamos redirigiendo ...</p>\n      )}\n    </div>\n  );\n};\n\nexport default Rdir;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,CACjB,KAAM,CAAEC,QAAS,CAAC,CAAGL,SAAS,CAAC,CAAC,CAChC,KAAM,CAACM,OAAO,CAAEC,UAAU,CAAC,CAAGT,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAAU,MAAM,CAAG,GAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAKF,MAAM,CAACC,QAAQ,CAACE,IAAI,GAAG,CACtEb,SAAS,CAAC,IAAM,CACd,GAAIM,QAAQ,CAAE,CACZQ,aAAa,CAACR,QAAQ,CAAC,CACzB,CACF,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAQ,aAAa,CAAG,KAAO,CAAAR,QAAQ,EAAK,CACxCE,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAO,QAAQ,CAAG,KAAM,CAAAb,KAAK,CAACc,IAAI,CAACC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAAC,aAAa,CAAE,CAC7EC,GAAG,CAAEX,MAAM,CAACH,QACd,CAAC,CACD,CACEe,OAAO,CAAE,CACT,eAAe,CAAE,UAAUJ,OAAO,CAACC,GAAG,CAACI,eAAe,EACxD,CACA,CAAC,CAAC,CACFC,OAAO,CAACC,GAAG,CAACT,QAAQ,CAACU,IAAI,CAACC,MAAM,CAAC,CACjC,GAAGX,QAAQ,CAACU,IAAI,CAACC,MAAM,EAAG,SAAS,CAAC,CAClChB,MAAM,CAACC,QAAQ,CAACgB,IAAI,CAAGZ,QAAQ,CAACU,IAAI,CAACL,GAAG,CAC1C,CAAC,IAAI,CACHV,MAAM,CAACC,QAAQ,CAACgB,IAAI,CAAG,GAAG,CAC5B,CACF,CAAE,MAAOC,KAAK,CAAE,CACdL,OAAO,CAACK,KAAK,CAACA,KAAK,CAAC,CACpBlB,MAAM,CAACC,QAAQ,CAACgB,IAAI,CAAG,GAAG,CAC5B,CAAC,OAAS,CACRnB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACEJ,IAAA,QAAAyB,QAAA,CACGtB,OAAO,cACNH,IAAA,MAAAyB,QAAA,CAAG,aAAW,CAAG,CAAC,cAElBzB,IAAA,MAAAyB,QAAA,CAAG,gDAA8C,CAAG,CACrD,CACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAxB,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}