{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import Swal from'sweetalert2';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Shorter=()=>{const[url,setOriginalUrl]=useState('');const[shortenedUrl,setShortenedUrl]=useState('');const[error,setError]=useState('');const domain=`${window.location.protocol}//${window.location.host}`;const validateUrl=url=>{const regex=/^(https?|ftp):\\/\\/[^\\s/$.?#].[^\\s]*$/i;return regex.test(url);};const handleSubmit=async e=>{e.preventDefault();if(!url){setError('El campo URL no puede estar vacío.');return;}if(!validateUrl(url)){setError('Por favor, ingrese una URL válida.');return;}setError('');Swal.fire({title:'Acortando URL...',timerProgressBar:true,didOpen:()=>{Swal.showLoading();},allowOutsideClick:false});try{const response=await axios.post(process.env.REACT_APP_API_URL+'/api/obtainUrl',{url:url,domain:domain},{headers:{'Authorization':`Bearer ${process.env.REACT_APP_TOKEN}`}});if(response.data&&response.data.short_url){setShortenedUrl(response.data.short_url);Swal.close();Swal.fire({title:'URL acortada',html:`\n              <div class=\"input-group\">\n                <input type=\"text\" class=\"form-control\" value=\"${response.data.short_url}\" readonly>\n                <div class=\"input-group-append\">\n                  <button class=\"btn btn-primary\" id=\"ir-a-url\">Ir a URL</button>\n                  <button class=\"btn btn-secondary\" id=\"copiar-url\">Copiar URL</button>\n                </div>\n              </div>\n            `,showConfirmButton:false,showCancelButton:false,allowOutsideClick:false,didOpen:()=>{const irAUrlButton=document.getElementById('ir-a-url');const copiarUrlButton=document.getElementById('copiar-url');irAUrlButton.addEventListener('click',()=>{window.open(response.data.short_url,'_blank');});copiarUrlButton.addEventListener('click',()=>{// Comprobamos si la API Clipboard está disponible\nif(navigator.clipboard){navigator.clipboard.writeText(response.data.short_url).then(()=>{Swal.fire({title:'URL copiada',text:'La URL ha sido copiada al portapapeles.',icon:'success',showConfirmButton:false,timer:1500});}).catch(err=>{fallbackCopyTextToClipboard(response.data.short_url);});}else{fallbackCopyTextToClipboard(response.data.short_url);}});}});}else{setError('No se recibió una URL acortada.');Swal.fire({title:'Error',text:'No se recibió una URL acortada.',icon:'error',showConfirmButton:false,timer:1500});}}catch(error){console.error(error);setError('Ocurrió un error al acortar la URL.');Swal.fire({title:'Error',text:'Ocurrió un error al acortar la URL.',icon:'error',showConfirmButton:false,timer:1500});}};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Acortador de URL\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"url\",children:\"URL:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",className:\"form-control\",id:\"url\",value:url,onChange:e=>setOriginalUrl(e.target.value),placeholder:\"Ingrese URL\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Acortar\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error})]})})});};function fallbackCopyTextToClipboard(text){const textArea=document.createElement('textarea');textArea.value=text;textArea.style.position='fixed';textArea.style.left='-9999px';document.body.appendChild(textArea);textArea.select();try{document.execCommand('copy');Swal.fire({title:'URL copiada',text:'La URL ha sido copiada al portapapeles.',icon:'success',showConfirmButton:false,timer:1500});}catch(err){console.error('Error al copiar el texto: ',err);}document.body.removeChild(textArea);}export default Shorter;","map":{"version":3,"names":["React","useState","axios","Swal","jsx","_jsx","jsxs","_jsxs","Shorter","url","setOriginalUrl","shortenedUrl","setShortenedUrl","error","setError","domain","window","location","protocol","host","validateUrl","regex","test","handleSubmit","e","preventDefault","fire","title","timerProgressBar","didOpen","showLoading","allowOutsideClick","response","post","process","env","REACT_APP_API_URL","headers","REACT_APP_TOKEN","data","short_url","close","html","showConfirmButton","showCancelButton","irAUrlButton","document","getElementById","copiarUrlButton","addEventListener","open","navigator","clipboard","writeText","then","text","icon","timer","catch","err","fallbackCopyTextToClipboard","console","className","children","onSubmit","htmlFor","type","id","value","onChange","target","placeholder","required","textArea","createElement","style","position","left","body","appendChild","select","execCommand","removeChild"],"sources":["/var/www/html/short/front/Fontend-shorter/src/components/Shorter.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\n\nconst Shorter = () => {\n  const [url, setOriginalUrl] = useState('');\n  const [shortenedUrl, setShortenedUrl] = useState('');\n  const [error, setError] = useState('');\n\n  const domain = `${window.location.protocol}//${window.location.host}`;\n  const validateUrl = (url) => {\n    const regex = /^(https?|ftp):\\/\\/[^\\s/$.?#].[^\\s]*$/i;\n    return regex.test(url);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!url) {\n      setError('El campo URL no puede estar vacío.');\n      return;\n    }\n    if (!validateUrl(url)) {\n      setError('Por favor, ingrese una URL válida.');\n      return;\n    }\n    setError('');\n    Swal.fire({\n      title: 'Acortando URL...',\n      timerProgressBar: true,\n      didOpen: () => {\n        Swal.showLoading();\n      },\n      allowOutsideClick: false,\n    });\n    try {\n      const response = await axios.post(process.env.REACT_APP_API_URL+'/api/obtainUrl', { \n        url: url, \n        domain: domain \n        },\n        {\n        headers: {\n          'Authorization': `Bearer ${process.env.REACT_APP_TOKEN}`\n        }\n      });\n      if (response.data && response.data.short_url) {\n        setShortenedUrl(response.data.short_url);\n        Swal.close();\n        Swal.fire({\n            title: 'URL acortada',\n            html: `\n              <div class=\"input-group\">\n                <input type=\"text\" class=\"form-control\" value=\"${response.data.short_url}\" readonly>\n                <div class=\"input-group-append\">\n                  <button class=\"btn btn-primary\" id=\"ir-a-url\">Ir a URL</button>\n                  <button class=\"btn btn-secondary\" id=\"copiar-url\">Copiar URL</button>\n                </div>\n              </div>\n            `,\n            showConfirmButton: false,\n            showCancelButton: false,\n            allowOutsideClick: false,\n            didOpen: () => {\n              const irAUrlButton = document.getElementById('ir-a-url');\n              const copiarUrlButton = document.getElementById('copiar-url');\n          \n              irAUrlButton.addEventListener('click', () => {\n                window.open(response.data.short_url, '_blank');\n              });\n          \n              copiarUrlButton.addEventListener('click', () => {\n                // Comprobamos si la API Clipboard está disponible\n                if (navigator.clipboard) {\n                  navigator.clipboard.writeText(response.data.short_url).then(() => {\n                    Swal.fire({\n                      title: 'URL copiada',\n                      text: 'La URL ha sido copiada al portapapeles.',\n                      icon: 'success',\n                      showConfirmButton: false,\n                      timer: 1500,\n                    });\n                  }).catch(err => {\n                    fallbackCopyTextToClipboard(response.data.short_url);\n                  });\n                } else {\n                  fallbackCopyTextToClipboard(response.data.short_url);\n                }\n              });\n            },\n          });\n          \n      } else {\n        setError('No se recibió una URL acortada.');\n        Swal.fire({\n          title: 'Error',\n          text: 'No se recibió una URL acortada.',\n          icon: 'error',\n          showConfirmButton: false,\n          timer: 1500,\n        });\n      }\n    } catch (error) {\n      console.error(error);\n      setError('Ocurrió un error al acortar la URL.');\n      Swal.fire({\n        title: 'Error',\n        text: 'Ocurrió un error al acortar la URL.',\n        icon: 'error',\n        showConfirmButton: false,\n        timer: 1500,\n      });\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-md-6\">\n          <h2>Acortador de URL</h2>\n          <form onSubmit={handleSubmit}>\n            <div className=\"form-group\">\n              <label htmlFor=\"url\">URL:</label>\n              <input\n                type=\"url\"\n                className=\"form-control\"\n                id=\"url\"\n                value={url}\n                onChange={(e) => setOriginalUrl(e.target.value)}\n                placeholder=\"Ingrese URL\"\n                required\n              />\n            </div>\n            <button type=\"submit\" className=\"btn btn-primary\">Acortar</button>\n          </form>\n          {error && <p className=\"text-danger\">{error}</p>}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nfunction fallbackCopyTextToClipboard(text) {\n  const textArea = document.createElement('textarea');\n  textArea.value = text;\n  textArea.style.position = 'fixed';\n  textArea.style.left = '-9999px';\n  document.body.appendChild(textArea);\n  textArea.select();\n  \n  try {\n    document.execCommand('copy');\n    Swal.fire({\n      title: 'URL copiada',\n      text: 'La URL ha sido copiada al portapapeles.',\n      icon: 'success',\n      showConfirmButton: false,\n      timer: 1500,\n    });\n  } catch (err) {\n    console.error('Error al copiar el texto: ', err);\n  }\n  \n  document.body.removeChild(textArea);\n}\n\nexport default Shorter;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}